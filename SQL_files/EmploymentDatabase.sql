
-- Create database
CREATE DATABASE IF NOT EXISTS EmploymentData;
USE EmploymentData;

-- Create tables

CREATE TABLE DateType(
DATE_TYPE_ID INTEGER,
DATE_TYPE VARCHAR(20),
DATE_TYPECODE INTEGER,
CONSTRAINT PK_DATE PRIMARY KEY (DATE_TYPE_ID)
);

INSERT INTO DateType(DATE_TYPE_ID, DATE_TYPE, DATE_TYPECODE) VALUES
(1, 'date',0);

CREATE TABLE Dates(
DATE_SORTORDER INTEGER,
_DATE INTEGER,
DATE_NAME INTEGER,
DATE_CODE INTEGER,
DATE_TYPE_ID INTEGER,
CONSTRAINT PK_DATE PRIMARY KEY (DATE_SORTORDER),
CONSTRAINT FK_DateType FOREIGN KEY(DATE_TYPE_ID) REFERENCES DateType(DATE_TYPE_ID)
);

INSERT INTO Dates(DATE_SORTORDER, _DATE, DATE_NAME, DATE_CODE, DATE_TYPE_ID) VALUES
(0, 2015, 2015, 2015, 1),
(1, 2016, 2016, 2016, 1),
(2, 2017, 2017, 2017, 1),
(3, 2018, 2018, 2018, 1),
(4, 2019, 2019, 2019, 1),
(5, 2020, 2020, 2020, 1),
(6, 2021, 2021, 2021, 1),
(7, 2022, 2022, 2022, 1),
(8, 2023, 2023, 2023, 1);

CREATE TABLE GeographyType(
GEOGRAPHY_TYPE_ID INTEGER,
GEOGRAPHY_TYPE VARCHAR(20),
GEOGRAPHY_TYPECODE INTEGER,
CONSTRAINT PK_GeographyType PRIMARY KEY (GEOGRAPHY_TYPE_ID)
);

INSERT INTO GeographyType(GEOGRAPHY_TYPE_ID, GEOGRAPHY_TYPE, GEOGRAPHY_TYPECODE) VALUES
(1,'countries', 499),
(2,'regions',480);

CREATE TABLE Geographies(
GEOGRAPHY_SORTORDER INTEGER,
GEOGRAPHY_NAME VARCHAR(200),
GEOGRAPHY VARCHAR(100),
GEOGRAPHY_CODE VARCHAR(100),
GEOGRAPHY_TYPE_ID INTEGER,
CONSTRAINT PK_Geography PRIMARY KEY (GEOGRAPHY_SORTORDER),
CONSTRAINT FK_GeographyType FOREIGN KEY(GEOGRAPHY_TYPE_ID) REFERENCES GeographyType(GEOGRAPHY_TYPE_ID)
);

INSERT INTO Geographies(GEOGRAPHY_SORTORDER, GEOGRAPHY_NAME, GEOGRAPHY, GEOGRAPHY_CODE, GEOGRAPHY_TYPE_ID) VALUES
(0, 'England', '2092957699', 'E92000001',1),
(1, 'England and Wales', '2092957703', 'K04000001',1),
(2, 'Great Britain', '2092957698', 'K03000001',1),
(3, 'Scotland', '2092957701', 'S92000003',1),
(4, 'Wales', '2092957700', 'W92000004',1),
(5, 'North East', '2013265921', 'E12000001',2),
(6, 'North West', '2013265922', 'E12000002',2),
(7, 'Yorkshire and The Humber', '2013265923', 'E12000003',2),
(8, 'East Midlands', '2013265924', 'E12000004',2),
(9, 'West Midlands', '2013265925', 'E12000005',2),
(10, 'East', '2013265926', 'E12000006',2),
(11, 'London', '2013265927', 'E12000007',2),
(12, 'South East', '2013265928', 'E12000008',2),
(13, 'South West', '2013265929', 'E12000009',2),
(14, 'Wales', '2013265930', 'W92000004',2),
(15, 'Scotland', '2013265931', 'S92000003',2);

CREATE TABLE IndustryType(
INDUSTRY_TYPE_ID INTEGER,
INDUSTRY_TYPE VARCHAR(100),
INDUSTRY_TYPECODE INTEGER,
CONSTRAINT PK_IndustryType PRIMARY KEY (INDUSTRY_TYPE_ID)
);

INSERT INTO IndustryType(INDUSTRY_TYPE_ID, INDUSTRY_TYPE, INDUSTRY_TYPECODE) VALUES
(1, 'SIC 2007 broad industrial groups 2', 39);

CREATE TABLE Industries(
INDUSTRY_CODE INTEGER,
INDUSTRY_NAME VARCHAR(200),
INDUSTRY VARCHAR(100),
INDUSTRY_TYPE_ID INTEGER,
CONSTRAINT PK_Industry PRIMARY KEY (INDUSTRY_CODE),
CONSTRAINT FK_IndustryType FOREIGN KEY(INDUSTRY_TYPE_ID) REFERENCES IndustryType(INDUSTRY_TYPE_ID)
);

INSERT INTO Industries(INDUSTRY_CODE, INDUSTRY_NAME, INDUSTRY,  INDUSTRY_TYPE_ID) VALUES
(1, '1 : Agriculture, forestry & fishing (A)', '163577857', 1),
(2, '2 : Mining, quarrying & utilities (B,D and E)', '163577858', 1),
(3, '3 : Manufacturing (C)', '163577859', 1),
(4, '4 : Construction (F)', '163577860', 1),
(5, '5 : Motor trades (Part G)', '163577861', 1),
(6, '6 : Wholesale (Part G)', '163577862', 1),
(7, '7 : Retail (Part G)', '163577863', 1),
(8, '8 : Transport & storage (inc postal) (H)', '163577864', 1),
(9, '9 : Accommodation & food services (I)','163577865' ,1),
(10, '10 : Information & communication (J)', '163577866', 1),
(11, '11 : Financial & insurance (K)', '163577867', 1),
(12, '12 : Property (L)', '163577868', 1),
(13, '13 : Professional, scientific & technical (M)','163577869', 1),
(14, '14 : Business administration & support services (N)', '163577870', 1),
(15, '15 : Public administration & defence (O)', '163577871', 1),
(16, '16 : Education (P)', '163577872', 1),
(17, '17 : Health (Q)', '163577873', 1),
(18, '18 : Arts, entertainment, recreation & other services (R,S,T and U)', '163577874', 1);

CREATE TABLE EmploymentStatusType(
EMPLOYMENT_STATUS_TYPE_ID INTEGER,
EMPLOYMENT_STATUS_TYPE VARCHAR(20),
EMPLOYMENT_STATUS_TYPECODE INTEGER,
CONSTRAINT PK_EmploymentStatusType PRIMARY KEY (EMPLOYMENT_STATUS_TYPE_ID)
);

INSERT INTO EmploymentStatusType(EMPLOYMENT_STATUS_TYPE_ID,  EMPLOYMENT_STATUS_TYPE, EMPLOYMENT_STATUS_TYPECODE) VALUES
(1, 'Employment', 1000);

CREATE TABLE EmploymentStatus(
EMPLOYMENT_STATUS_CODE INTEGER,
EMPLOYMENT_STATUS_NAME VARCHAR(200),
EMPLOYMENT_STATUS VARCHAR(100),
EMPLOYMENT_STATUS_TYPE_ID INTEGER,
CONSTRAINT PK_EmploymentStatus PRIMARY KEY (EMPLOYMENT_STATUS_CODE),
CONSTRAINT FK_EmploymentStatusType FOREIGN KEY(EMPLOYMENT_STATUS_TYPE_ID) REFERENCES EmploymentStatusType(EMPLOYMENT_STATUS_TYPE_ID)
);

INSERT INTO EmploymentStatus(EMPLOYMENT_STATUS_CODE, EMPLOYMENT_STATUS_NAME, 
EMPLOYMENT_STATUS,  EMPLOYMENT_STATUS_TYPE_ID) VALUES
(1, 'Employees', 1, 1),
(2, 'Full-time employees', 2, 1),
(3, 'Part-time employees', 3, 1);

CREATE TABLE MeasureType(
MEASURE_TYPE_ID INTEGER,
MEASURE_TYPE VARCHAR(20),
MEASURE_TYPECODE INTEGER,
MEASURES VARCHAR(20),
MEASURES_NAME VARCHAR(20),
CONSTRAINT PK_Measure PRIMARY KEY (MEASURE_TYPE_ID)
);

INSERT INTO MeasureType(MEASURE_TYPE_ID, MEASURE_TYPE, MEASURE_TYPECODE, MEASURES, MEASURES_NAME) VALUES
(1, 'percent', 1000, 20100, 'Value');

CREATE TABLE Measures(
MEASURE_CODE INTEGER,
MEASURE_NAME VARCHAR(200),
MEASURE VARCHAR(100),
MEASURE_TYPE_ID INTEGER,
CONSTRAINT PK_Measure PRIMARY KEY (MEASURE_CODE),
CONSTRAINT FK_MeasureType FOREIGN KEY(MEASURE_TYPE_ID) REFERENCES MeasureType(MEASURE_TYPE_ID)
);

INSERT INTO Measures(MEASURE_CODE, MEASURE_NAME, MEASURE, MEASURE_TYPE_ID) VALUES
(1, 'Count', 1, 1),
(2, 'Industry percentage',  2, 1);

CREATE TABLE Observations(
OBS_CODE INTEGER,
OBS_STATUS VARCHAR(20),
OBS_STATUS_NAME VARCHAR(100),
OBS_CONF VARCHAR(20),
OBS_CONF_NAME VARCHAR(200),
CONSTRAINT PK_Observations PRIMARY KEY (OBS_CODE)
);

INSERT INTO Observations(OBS_CODE, OBS_STATUS, 
OBS_STATUS_NAME,  OBS_CONF, OBS_CONF_NAME) VALUES
(1, 'A','Normal Value', 'F','Free (free for publication)');

CREATE TABLE EmploymentData(
RecordID INTEGER NOT NULL AUTO_INCREMENT,
DATE_SORTORDER INTEGER NOT NULL,
GEOGRAPHY_SORTORDER INTEGER NOT NULL,
INDUSTRY_CODE INTEGER NOT NULL,
EMPLOYMENT_STATUS_CODE INTEGER NOT NULL,
MEASURE_CODE INTEGER NOT NULL,
OBS_CODE INTEGER NOT NULL,
OBS_VALUE DOUBLE,
URN VARCHAR(100),
CONSTRAINT PK_RecordID PRIMARY KEY (RecordID),
CONSTRAINT FK_Date FOREIGN KEY(DATE_SORTORDER) REFERENCES Dates(DATE_SORTORDER),
CONSTRAINT FK_Geography FOREIGN KEY(GEOGRAPHY_SORTORDER) REFERENCES Geographies(GEOGRAPHY_SORTORDER),
CONSTRAINT FK_Industry FOREIGN KEY(INDUSTRY_CODE) REFERENCES Industries(INDUSTRY_CODE),
CONSTRAINT FK_EmploymentStatus FOREIGN KEY(EMPLOYMENT_STATUS_CODE) REFERENCES EmploymentStatus(EMPLOYMENT_STATUS_CODE),
CONSTRAINT FK_Measure FOREIGN KEY(MEASURE_CODE) REFERENCES Measures(MEASURE_CODE),
CONSTRAINT FK_Observation FOREIGN KEY(OBS_CODE) REFERENCES Observations(OBS_CODE)
);